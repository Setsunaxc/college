<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta name="description" content="Crush it Able The most popular Admin Dashboard template and ui kit">
<meta name="author" content="PuffinTheme the theme designer">

<link rel="icon" href="favicon.ico" type="image/x-icon"/>

<title>:: Crush it :: Home</title>

<!-- Bootstrap Core and vandor -->
<link rel="stylesheet" href="http://cdn.bootstrapmb.com/bootstrap/4.3.1/css/bootstrap.min.css" />

<!-- Plugins css -->
<link rel="stylesheet" href="style/css/c3.min.css"/>
<link rel="stylesheet" href="style/css/jvectormap-2.0.3.css" />

<!-- Core css -->
<link rel="stylesheet" href="style/css/main.css"/>
<link rel="stylesheet" href="style/css/theme4.css" id="stylesheet"/>
</head>

<body class="font-opensans">

<!-- Page Loader -->
<div class="page-loader-wrapper">
    <div class="loader">
    </div>
</div>

<!-- Start main html -->
<div id="main_content">

    <!-- Small icon top menu -->
    <div id="header_top" class="header_top">
        <div class="container">
            <div class="hleft">
                <div class="dropdown">
                    <a href="javascript:void(0)" class="nav-link user_btn"><img class="avatar" src="../assets/images/user.png" alt=""/></a>
                    <a href="https://www.baidu.com/" class="nav-link icon"><i class="fa fa-search"></i></a>
                    <a href="https://www.baidu.com/" class="nav-link icon"><i class="fa fa-home"></i></a>
                    <a href="app-filemanager.html"  class="nav-link icon app_file xs-hide"><i class="fa fa-folder"></i></a>
                </div>
            </div>
          
        </div>
    </div>

    <!-- Notification and  Activity-->
    

    <!-- start User detail -->
 

    <!-- start Main menu -->
    <div id="left-sidebar" class="sidebar">
        <div class="d-flex justify-content-between brand_name">
            <h5 class="brand-name">Crush it</h5>
            <div class="theme_btn">
                <a class="theme1" data-toggle="tooltip" title="Theme Radical" href="#" onclick="setStyleSheet('../assets/css/theme1.css', 0);"></a>
                <a class="theme2" data-toggle="tooltip" title="Theme Turmeric" href="#" onclick="setStyleSheet('../assets/css/theme2.css', 0);"></a>
                <a class="theme3" data-toggle="tooltip" title="Theme Caribbean" href="#" onclick="setStyleSheet('../assets/css/theme3.css', 0);"></a>
                <a class="theme4" data-toggle="tooltip" title="Theme Cascade" href="#" onclick="setStyleSheet('../assets/css/theme4.css', 0);"></a>
            </div>
        </div>
       
    </div>

    <!-- start main body part-->
    <div class="page">

        <!-- start body header -->
        <div id="page_top" class="section-body">
            <div class="container-fluid">
                <div class="page-header">
                    <div class="left">
                        <h1 class="page-title">Upload</h1>
                    </div>
                    <div class="right">
                        <div class="notification d-flex">
                            <button type="button" class="btn btn-facebook"><i class="fa fa-info-circle mr-2"></i>Need Help</button>
                            <button type="button" class="btn btn-facebook"><i class="fa fa-file-text mr-2"></i>Data export</button>
                            <button type="button" class="btn btn-facebook"><i class="fa fa-power-off mr-2"></i>Sign Out</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="section-body">
            <div class="container-fluid">
                <div class="row clearfix">
                    <div class="col-lg-12">
                        <div class="mb-4">
                            <h2>You can upload the offer here</h2>                            
                            <small>Measure How Fast You’re Growing Monthly Recurring Revenue. <a href="#">Learn More</a></small>
                        </div>                        
                    </div>
                </div>
                <div class="row clearfix row-deck">
                    <div class="col-lg-4 col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">My Balance</h3>
                                <div class="card-options">
                                    <a href="#" class="card-options-fullscreen" data-toggle="card-fullscreen"><i class="fe fe-maximize"></i></a>
                                    <a href="#" class="card-options-remove" data-toggle="card-remove"><i class="fe fe-x"></i></a>
                                    <div class="item-action dropdown ml-2">
                                        <a href="javascript:void(0)" data-toggle="dropdown"><i class="fe fe-more-vertical"></i></a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <a href="javascript:void(0)" class="dropdown-item"><i class="dropdown-icon fa fa-eye"></i> View Details </a>
                                            <a href="javascript:void(0)" class="dropdown-item"><i class="dropdown-icon fa fa-share-alt"></i> Share </a>
                                            <a href="javascript:void(0)" class="dropdown-item"><i class="dropdown-icon fa fa-cloud-download"></i> Download</a>                                            
                                            <div class="dropdown-divider"></div>
                                            <a href="javascript:void(0)" class="dropdown-item"><i class="dropdown-icon fa fa-copy"></i> Copy to</a>
                                            <a href="javascript:void(0)" class="dropdown-item"><i class="dropdown-icon fa fa-folder"></i> Move to</a>
                                            <a href="javascript:void(0)" class="dropdown-item"><i class="dropdown-icon fa fa-edit"></i> Rename</a>
                                            <a href="javascript:void(0)" class="dropdown-item"><i class="dropdown-icon fa fa-trash"></i> Delete</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <span>Balance</span>
                                <script type="text/javascript">
                                    //图片上传
                                    var xhr;
                                    //上传文件方法
                                    function UpladFile() {
                                      var fileObj = document.getElementById("file").files[0]; // js 获取文件对象
                                      var url = "http://localhost:8080" + "/api/attachment/upload"; // 接收上传文件的后台地址
                              
                                      var form = new FormData(); // FormData 对象
                                      form.append("file", fileObj); // 文件对象
                              
                                      xhr = new XMLHttpRequest(); // XMLHttpRequest 对象
                                      xhr.open("post", url, true); //post方式，url为服务器请求地址，true 该参数规定请求是否异步处理。
                                      xhr.onload = uploadComplete; //请求完成
                                      xhr.onerror = uploadFailed; //请求失败
                              
                                      xhr.upload.onprogress = progressFunction; //【上传进度调用方法实现】
                                      xhr.upload.onloadstart = function () {
                                        //上传开始执行方法
                                        ot = new Date().getTime(); //设置上传开始时间
                                        oloaded = 0; //设置上传开始时，以上传的文件大小为0
                                      };
                              
                                      xhr.send(form); //开始上传，发送form数据
                                    }
                              
                                    //上传成功响应
                                    function uploadComplete(evt) {
                                      //服务断接收完文件返回的结果
                              
                                      var data = JSON.parse(evt.target.responseText);
                                      if (data.success) {
                                        alert("上传成功！");
                                      } else {
                                        alert("上传失败！");
                                      }
                                    }
                                    //上传失败
                                    function uploadFailed(evt) {
                                      alert("上传失败！");
                                    }
                                    //取消上传
                                    function cancleUploadFile() {
                                      xhr.abort();
                                    }
                              
                                    //上传进度实现方法，上传过程中会频繁调用该方法
                                    function progressFunction(evt) {
                                      var progressBar = document.getElementById("progressBar");
                                      var percentageDiv = document.getElementById("percentage");
                                      // event.total是需要传输的总字节，event.loaded是已经传输的字节。如果event.lengthComputable不为真，则event.total等于0
                                      if (evt.lengthComputable) {
                                        //
                                        progressBar.max = evt.total;
                                        progressBar.value = evt.loaded;
                                        percentageDiv.innerHTML =
                                          Math.round((evt.loaded / evt.total) * 100) + "%";
                                      }
                                      var time = document.getElementById("time");
                                      var nt = new Date().getTime(); //获取当前时间
                                      var pertime = (nt - ot) / 1000; //计算出上次调用该方法时到现在的时间差，单位为s
                                      ot = new Date().getTime(); //重新赋值时间，用于下次计算
                                      var perload = evt.loaded - oloaded; //计算该分段上传的文件大小，单位b
                                      oloaded = evt.loaded; //重新赋值已上传文件大小，用以下次计算
                                      //上传速度计算
                                      var speed = perload / pertime; //单位b/s
                                      var bspeed = speed;
                                      var units = "b/s"; //单位名称
                                      if (speed / 1024 > 1) {
                                        speed = speed / 1024;
                                        units = "k/s";
                                      }
                                      if (speed / 1024 > 1) {
                                        speed = speed / 1024;
                                        units = "M/s";
                                      }
                                      speed = speed.toFixed(1);
                                      //剩余时间
                                      var resttime = ((evt.total - evt.loaded) / bspeed).toFixed(1);
                                      time.innerHTML =
                                        "，速度：" + speed + units + "，剩余时间：" + resttime + "s";
                                      if (bspeed == 0) time.innerHTML = "上传已取消";
                                    }
                                  </script>
                                </head>
                                <body>
                                  <progress
                                    id="progressBar"
                                    value="0"
                                    max="100"
                                    style="width: 300px"
                                  ></progress>
                                  <span id="percentage"></span><span id="time"></span> <br /><br />
                                  <input type="file" id="file" name="myfile" />
                                  <input type="button" οnclick="UpladFile()" value="上传" />
                                  <input type="button" οnclick="cancleUploadFile()" value="取消" />
                                
                            </div>
                           
                        </div>
                    </div>
                    <div class="col-lg-8 col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Product Valuation</h3>
                                <div class="card-options">
                                    <label class="custom-switch m-0">
                                        <input type="checkbox" value="1" class="custom-switch-input" checked="">
                                        <span class="custom-switch-indicator"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="card-body">
                                <div id="chart-bar" style="height: 350px"></div>
                            </div>
                            <div class="card-footer">
                                <div class="d-flex justify-content-between">
                                    <a href="javascript:void(0)" class="btn btn-info btn-sm w200">Generate Report</a>
                                    <small>Measure How Fast You’re Growing Monthly Recurring Revenue. <a href="#">Learn More</a></small>                                    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


<!-- jQuery and bootstrtap js -->
<script src="style/js/lib.vendor.bundle.js"></script>



<!-- Start core js and page js -->
<script src="style/js/core.js"></script>


<script>
function setStyleSheet(url){
    var stylesheet = document.getElementById("stylesheet");
    stylesheet.setAttribute('href', url);
}
</script>
</body>
</html>
